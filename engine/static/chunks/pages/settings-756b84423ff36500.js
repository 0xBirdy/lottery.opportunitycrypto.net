(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{52837:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return t(99504)}])},99504:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return se}});var o=t(47568),r=t(26042),a=t(34051),s=t.n(a),i=t(85893),c=t(214),l=t.n(c),d=t(44423),u=t(11163),h=[{id:"index",title:"Home",link:"index"},{id:"settings",title:"Settings",link:"settings",adminOnly:!0}],f=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,u.useRouter)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("nav",{className:"".concat(l().mainNav," headerNavMenu"),children:h.map((function(t){return t.adminOnly&&!n?null:(0,i.jsx)("a",{className:e===t.id?"".concat(l().active," headerNavActive"):"",href:(0,d.R)(t.link),children:t.title},t.id)}))}),(0,i.jsx)("div",{className:l().mainNavSeperator})]})},m=t(14924),v=t(69396),g=t(67294),x=t(25364),j=t(73848),p=t(99603),b=t(59417);function w(e){var n=e.icon,t="fa-".concat(n).replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,n){return 0===n?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"").replaceAll("-","");return(0,i.jsx)(p.G,{icon:b[t]})}function y(e){var n=(0,r.Z)({onToggle:function(){}},e),t=n.title,o=n.isOpened,a=n.content,s=n.onToggle,c=n.key;return(0,i.jsxs)("div",{className:"".concat(l().adminToggleGroup," ").concat(o?l().adminToggleGroupOpened:""),children:[(0,i.jsxs)("div",{className:l().adminToggleGroupHeader,onClick:function(){s(!o)},children:[(0,i.jsx)("h3",{children:t}),(0,i.jsx)("a",{children:(0,i.jsx)(w,{icon:o?"arrow-up":"arrow-down"})})]}),o&&(0,i.jsx)("div",{className:l().adminToggleGroupContent,children:a})]},c)}function k(e){var n=(0,r.Z)({href:"",title:"",icon:"up-right-from-square",onClick:function(){}},e),t=n.href,o=n.title,a=n.icon,s=n.onClick,c=n.target,d=n.disabled,u={className:"".concat(l().iconButton," ").concat(d?l().iconButtonDisabled:""),alt:o,title:o};return t&&(u.href=t),c&&(u.target=c),(0,i.jsx)("a",(0,v.Z)((0,r.Z)({},u),{onClick:function(){d||s()},children:(0,i.jsx)(w,{icon:a})}))}var S=t(52484);function C(e){e.setDoReloadStorage;var n=e.saveStorageConfig,t=e.openConfirmWindow,o=e.addNotify,a=(e.getActiveChain,e.storageDesign),s=localStorage.getItem("-lotery-preview-mode"),c=localStorage.getItem("-lotery-preview-design");try{c=JSON.parse(c),c=(0,r.Z)({},x.$,c)}catch(B){c=x.$}var d=(0,g.useState)(null!==s),u=d[0],h=d[1],f=(0,r.Z)({},x.$,a);console.log("initialDesign",f);var p=(0,g.useState)(s?c:f),b=p[0],w=p[1],k=(0,g.useState)(!1);k[0],k[1];console.log(">>> designValues",b);var C=function(e){var n=e.title,t=e.target,o=e.defValue;return(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsxs)("label",{children:[n,":"]}),(0,i.jsx)("span",{children:(0,i.jsx)("div",{children:(0,i.jsx)(S.ZP,{initialValue:b[t]?b[t]:o,onChange:function(e){w((function(n){return(0,v.Z)((0,r.Z)({},n),(0,m.Z)({},"".concat(t),e.hex))}))},placement:"right"})})})]})},N=function(){t({title:"Switch to preview mode",message:"Switch to preview mode? You can look changes before save",onConfirm:function(){o("Preview mode on. Go to site for check it","success"),localStorage.setItem("-nft-stake-preview-mode",!0),localStorage.setItem("-nft-stake-preview-design",JSON.stringify(b)),h(!0)}})},F=function(){o("Preview mode turn off","success"),localStorage.removeItem("-nft-stake-preview-mode"),localStorage.removeItem("-nft-stake-preview-design"),h(!1)};(0,g.useEffect)((function(){u&&(localStorage.setItem("-nft-stake-preview-design",JSON.stringify(b)),localStorage.setItem("-nft-stake-preview-utx",(0,j.K)()))}),[b]);var I=function(){n({onBegin:function(){o("Confirm transaction for save changed texts")},onReady:function(){o("Texts successfull saved","success")},onError:function(e){o("Fail save texts","error")},newData:{design:b}})},T=(0,g.useState)({}),A=T[0],D=T[1],R=function(e){D((function(n){return(0,v.Z)((0,r.Z)({},n),(0,m.Z)({},"".concat(e),!n[e]||!n[e]))}))};return{render:function(){return(0,i.jsxs)("div",{className:l().adminForm,children:[y({title:"Base color",isOpened:null===A||void 0===A?void 0:A.baseColors,onToggle:function(){R("baseColors")},content:(0,i.jsx)("div",{className:l().subFormInfo,children:(0,i.jsxs)("div",{className:l().subForm,children:[C({title:"Background color",target:"backgroundColor"}),C({title:"Text color",target:"baseTextColor"}),C({title:"Secondary",target:"baseSecondaryColor",defValue:"#7645D9"}),C({title:"Subtitle color",target:"baseSubTitleColor",defValue:"#452A7A"})]})})}),y({title:"Header settings",isOpened:null===A||void 0===A?void 0:A.headerSection,onToggle:function(){R("headerSection")},content:(0,i.jsx)("div",{className:l().subFormInfo,children:(0,i.jsxs)("div",{className:l().subForm,children:[C({title:"Section title color",target:"headerTitleColor"}),C({title:"Background color 1",target:"headerBgColor1",defValue:"#7645D9"}),C({title:"Background color 2",target:"headerBgColor2",defValue:"#452A7A"})]})})}),y({title:"Buy tickets section",isOpened:null===A||void 0===A?void 0:A.buyTicketsSection,onToggle:function(){R("buyTicketsSection")},content:(0,i.jsx)("div",{className:l().subFormInfo,children:(0,i.jsxs)("div",{className:l().subForm,children:[C({title:"Section title color",target:"buyTicketTitleColor"}),C({title:"Background color 1",target:"buyTicketBgColor1",defValue:"#7645D9"}),C({title:"Background color 2",target:"buyTicketBgColor2",defValue:"#5121B1"})]})})}),y({title:"Price section",isOpened:null===A||void 0===A?void 0:A.priceSection,onToggle:function(){R("priceSection")},content:(0,i.jsx)("div",{className:l().subFormInfo,children:(0,i.jsxs)("div",{className:l().subForm,children:[C({title:"Section title color",target:"priceSectionTitleColor"}),C({title:"Background color 1",target:"priceSectionBgColor1",defValue:"#313D5C"}),C({title:"Background color 2",target:"priceSectionBgColor2",defValue:"#3D2A54"})]})})}),y({title:"Rounds history section",isOpened:null===A||void 0===A?void 0:A.roundsHistory,onToggle:function(){R("roundsHistory")},content:(0,i.jsx)("div",{className:l().subFormInfo,children:(0,i.jsxs)("div",{className:l().subForm,children:[C({title:"Section title color",target:"roundsHistoryTitleColor"}),C({title:"Background color 1",target:"roundsHistoryBgColor1",defValue:"#CBD7EF"}),C({title:"Background color 2",target:"roundsHistoryBgColor2",defValue:"#9A9FD0"})]})})}),y({title:"How to play settings",isOpened:null===A||void 0===A?void 0:A.howToPlay,onToggle:function(){R("howToPlay")},content:(0,i.jsx)("div",{className:l().subFormInfo,children:(0,i.jsxs)("div",{className:l().subForm,children:[C({title:"Section title",target:"howToPlayTitleColor"}),C({title:"Background color",target:"howToPlayBgColor",defValue:"#ffffff"})]})})}),(0,i.jsxs)("div",{className:l().actionsRowMain,children:[u?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("button",{onClick:F,children:"Turn off preview mode"})}):(0,i.jsx)("button",{onClick:N,children:"Turn on preview mode"}),(0,i.jsx)("button",{onClick:I,children:"Save changes"})]})]})}}}var N=t(64914),F=t.n(N),I=t(3283),T=t.n(I),A=t(64262),D=function(e,n){return new Promise((function(t,o){var r=(0,A.T_)(n);if(r)try{var a=new(new(T())(r.rpcUrls[0]).eth.Contract)(F(),e);a.methods.decimals().call().then((function(r){a.methods.symbol().call().then((function(s){a.methods.name().call().then((function(o){t({address:e,chainId:n,decimals:r,symbol:s,name:o})})).catch((function(e){o(e)}))})).catch((function(e){o(e)}))})).catch((function(e){o(e)}))}catch(s){o(s)}else o("NOT_SUPPORTED_CHAIN")}))},R=t(56767),B=t(44431),Z=t.n(B),_=function(e){return new Promise((function(n,t){var r=e.activeWeb3,a=e.tokenAddress,i=e.onTrx||function(){},c=e.onSuccess||function(){},l=e.onError||function(){},d=e.onFinally||function(){};r.eth.getAccounts().then(function(){var e=(0,o.Z)(s().mark((function e(n){var o,u,h,f,m,v;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>0)){e.next=13;break}return o=n[0],u=new r.eth.Contract(R.Mt),h={from:o,gas:"0"},f=[a],e.next=7,u.deploy({arguments:f,data:R.aT.eF.Ry}).estimateGas(h);case 7:m=e.sent,v=new B.BigNumber(new B.BigNumber(m).multipliedBy(1.05).toFixed(0)).toString(16),h.gas="0x"+v,u.deploy({data:"0x"+R.aT.eF.Ry,arguments:f}).send(h).on("transactionHash",(function(e){console.log("transaction hash:",e),i(e)})).on("error",(function(e){console.log("transaction error:",e),l(e)})).on("receipt",(function(e){console.log("transaction receipt:",e),c(e.contractAddress)})).then((function(){d()})),e.next=14;break;case 13:t("NO_ACTIVE_ACCOUNT");case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.log(">>> deployLottery",e),t(e)}))}))};function E(e){var n=e.type,t=e.label,o=e.value,r=e.onChange,a=e.buttons,s=e.values,c=e.placeholder,d=e.hasError,u=e.errorText,h=n;if("address"===n)h="text";return(0,i.jsxs)("div",{className:"".concat(l().adminFormInputHolder," ").concat(d?l().hasError:""),children:["list"===n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("label",{children:[t,": (",o,")"]}),(0,i.jsxs)("div",{children:[d&&u&&(0,i.jsx)("span",{className:l().hasError,children:u}),(0,i.jsx)("select",{value:o,onChange:function(e){return r(e.target.value)},children:s.map((function(e){return(0,i.jsx)("option",{value:e.id,children:e.title},e.id)}))})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("label",{children:[t,":"]}),d&&u&&(0,i.jsx)("span",{className:l().hasError,children:u}),(0,i.jsx)("div",{children:"number"===h?(0,i.jsx)("input",{min:(null===e||void 0===e?void 0:e.minValue)||void 0,max:(null===e||void 0===e?void 0:e.maxValue)||void 0,type:"number",placeholder:c||"",value:o,onChange:function(e){r(e.target.value)}}):(0,i.jsx)("input",{type:h,placeholder:c||"",value:o,onChange:function(e){return r(e.target.value)}})})]}),a&&(0,i.jsx)("div",{className:l().adminFormButtonsHolder,children:a})]})}var W=function(){var e=Object.keys(A.w5).map((function(e){return{id:A.w5[e].networkVersion,title:A.w5[e].chainName}}));return e.unshift({id:0,title:"Select Blockchain"}),e}();function O(e){e.setDoReloadStorage;var n=e.saveStorageConfig,t=e.openConfirmWindow,o=e.addNotify,r=e.getActiveChain,a=e.storageData,s=(0,g.useState)(null===a||void 0===a?void 0:a.chainId),c=s[0],d=s[1],u=(0,g.useState)(null===a||void 0===a?void 0:a.lotteryAddress),h=u[0],f=u[1],m=(0,g.useState)(null===a||void 0===a?void 0:a.tokenAddress),v=m[0],x=m[1],j=(0,g.useState)(!1),p=j[0],b=(j[1],(0,g.useState)(!1)),w=(b[0],b[1],(0,g.useState)(!1)),y=w[0],k=w[1],S=(0,g.useState)(!1),C=S[0],N=S[1],F=(0,g.useState)(null===a||void 0===a?void 0:a.tokenInfo),I=F[0],T=F[1],R=(0,g.useState)(!1),B=R[0],Z=R[1],O=(0,g.useState)(void 0!==a.tokenInfo.address),L=O[0],P=O[1],V=(0,g.useState)(!1),M=V[0],H=V[1],U=function(){t({title:"Save to storage",message:"Save changes to storage config?",onConfirm:function(){H(!0),n({onBegin:function(){o("Confirm transaction")},onReady:function(){H(!1),o("Changed saved","success")},onError:function(e){H(!1),o("Fail save changes. ".concat(e.message?e.message:""),"error")},newData:{chainId:c,tokenAddress:v,lotteryAddress:h,tokenInfo:I}})}})},G=function(){c?(P(!1),Z(!1),T({}),o("Fetching token info"),D(v,c).then((function(e){Z(!1),T(e),P(!0),o("Token info fetched","success")})).catch((function(e){o("Fail fetch token info. ".concat(e.message?e.message:""),"error"),Z(!1)}))):o("Fail fetch. Select work chain first","error")},J=function(){},K=function(){N(!1)},Y=function(){N(!0)},q=(0,g.useState)(!1),z=(q[0],q[1],function(){if(!c)return o("Fail. Select work chain first","error");if(!L)return o("Fail. Fetch token info first","error");var e=r(),n=e.activeChainId,a=e.activeWeb3,s=(0,A.T_)(n);c&&L&&v&&t({title:"Deploying Lottery contract",message:"Deploy Lottery contract at ".concat(s.chainName," (").concat(n,")?"),onConfirm:function(){k(!0),o("Deploying lottery. Confrirm transaction"),_({activeWeb3:a,tokenAddress:v,onTrx:function(e){o("Lottery contract deploy TX ".concat(e,"..."),"success")},onSuccess:function(e){try{o("Lottery contract deployed. Now save settings","success"),f(e),k(!1),N(!1)}catch(n){console.log(">>> onSuccess error",n)}},onError:function(e){o("Fail deploy Lottery contract. ".concat(e.message?e.message:""),"error"),k(!1),console.log(e)}}).catch((function(e){k(!1),o("Fail deploy Lottery contract. ".concat(e.message?e.message:""),"error")}))}})});return{render:function(){return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:l().adminForm,children:[E({label:"Work blockchain ID",type:"list",values:W,value:c,onChange:d}),C?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:l().subFormInfo,children:[(0,i.jsx)("h3",{children:"Deploy new Lottery contract options"}),(0,i.jsxs)("div",{className:l().subForm,children:[E({label:"Lottery token",type:"address",value:v,onChange:x,placeholder:"Ender address of lottery ERC20 token",buttons:(0,i.jsx)("button",{disabled:B,onClick:G,children:B?"Fetching":"Fetch token info"})}),L&&I&&I.address&&(0,i.jsxs)("div",{className:l().infoTable,children:[(0,i.jsx)("h3",{children:"Token info"}),(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Symbol:"}),(0,i.jsx)("span",{children:(0,i.jsx)("b",{children:I.symbol})})]}),(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Name:"}),(0,i.jsx)("span",{children:(0,i.jsx)("b",{children:I.name})})]}),(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Decimals:"}),(0,i.jsx)("span",{children:(0,i.jsx)("b",{children:I.decimals})})]})]})]}),(0,i.jsxs)("div",{className:l().actionsRow,children:[(0,i.jsx)("button",{disabled:y,onClick:z,children:y?"Deploying":"Deploy Lottery contract"}),(0,i.jsx)("button",{disabled:y,onClick:K,children:"Cancel"})]})]})}):(0,i.jsxs)(i.Fragment,{children:[E({label:"Lottery contract",type:"address",value:h,onChange:f,placeholder:"Enter address of lottery contract",buttons:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{disabled:p||y,className:l().secondaryButton,onClick:J,children:p?"Fetching info":"Fetch info"}),(0,i.jsx)("button",{disabled:p||y,className:l().secondaryButton,onClick:Y,children:"Deploy new"})]})}),L&&I&&I.address&&(0,i.jsxs)("div",{className:l().subFormInfo,children:[(0,i.jsx)("h3",{children:"Token info"}),(0,i.jsxs)("div",{className:l().subForm,children:[(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Address:"}),(0,i.jsx)("span",{children:(0,i.jsx)("b",{children:I.address})})]}),(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Symbol:"}),(0,i.jsx)("span",{children:(0,i.jsx)("b",{children:I.symbol})})]}),(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Name:"}),(0,i.jsx)("span",{children:(0,i.jsx)("b",{children:I.name})})]}),(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Decimals:"}),(0,i.jsx)("span",{children:(0,i.jsx)("b",{children:I.decimals})})]})]})]})]}),(0,i.jsx)("div",{className:l().actionsRowMain,children:(0,i.jsx)("button",{disabled:M,onClick:U,className:l().secondaryButton,children:M?"Saving...":"Save to storage config"})})]})})}}}var L=t(88765);function P(e){e.setDoReloadStorage;var n=e.saveStorageConfig,t=e.openConfirmWindow,o=e.addNotify,a=e.getActiveChain,s=e.storageData,c=(e.getStorageData,(0,g.useState)(0)),d=c[0],u=c[1],h=(0,g.useState)(0),f=h[0],x=h[1],j=(0,g.useState)(0),p=j[0],b=j[1],y=(0,g.useState)(!1),S=y[0],C=y[1],N=(0,g.useState)(s.ticketPrice),F=N[0],I=N[1],T=(0,g.useState)(!1),A=T[0],D=T[1],R=(0,g.useState)(!1),B=(R[0],R[1]);(0,g.useEffect)((function(){s.lotteryAddress&&s.chainId&&(0,L.Z)({isCall:!0,chainId:s.chainId,contractAddress:s.lotteryAddress,method:"numbersCount",args:[]}).then((function(e){z(e)}))}),[s]);var Z=(0,g.useState)(s.matchRules||{match_1:39.2,match_2:58.8,match_3:6.125,match_4:12.25,match_5:24.5,match_6:49}),_=Z[0],E=Z[1],W=(0,g.useState)([1,2,3,4,5,6]),O=W[0],P=W[1],V=(0,g.useState)(!1),M=V[0],H=V[1],U=(0,g.useState)(!1),G=U[0],J=U[1],K=(0,g.useState)(s.burn),Y=K[0],q=K[1],z=function(e){e<2&&(e=2),e>6&&(e=6),b(e),P((function(n){return[1,2,3,4,5,6].filter((function(n){return n<=parseInt(e)}))}))};(0,g.useEffect)((function(){!function(){for(var e=0,n=1;n<=6;n++)n<=p&&(e+=_["match_".concat(n)]);u(e),x(100-e)}()}),[p,_]);var X=function(){t({title:"Save changes to Lottery",message:"Save new count of balls?",onConfirm:function(){H(!0);var e=a().activeWeb3;o("Confirm transaction"),(0,L.Z)({activeWeb3:e,contractAddress:s.lotteryAddress,method:"setNumbersCount",args:[p]}).then((function(e){H(!1),C(!1),o("Changes saved","success")})).catch((function(e){H(!1),o("Fail save balls count. ".concat(e.message?e.message:""),"error")}))}})},$=function(){t({title:"Save match rules",message:"Save winning balls match rules, burn amount and ticket price to storage config?",onConfirm:function(){J(!0),o("Saving winning rules..."),n({onBegin:function(){o("Confirm transaction")},onReady:function(){J(!1),o("Changed saved","success")},onError:function(e){J(!1),o("Fail save changes. ".concat(e.message?e.message:""),"error")},newData:{matchRules:_,burn:Y,balls:p,ticketPrice:F}})}})};return{render:function(){var e;return s.lotteryAddress?(0,i.jsx)("div",{className:l().adminForm,children:(0,i.jsxs)("div",{className:l().subFormInfo,children:[(0,i.jsx)("h3",{children:"Lottery rules"}),(0,i.jsx)("div",{className:l().subForm,children:(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Balls count:"}),(0,i.jsx)("div",{children:(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"number",min:"2",max:"6",step:"1",value:p,onChange:function(e){z(e.target.value)}}),k({title:"Save to contract",onClick:X,disabled:M,icon:"save"})]})})]})}),(0,i.jsx)("h3",{children:"Distribution of prizes %"}),(0,i.jsxs)("div",{className:l().subForm,children:[(0,i.jsx)("h4",{children:"Distribute the winning percentage based on the number of matched balls"}),O.map((function(e){return(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsxs)("label",{children:["Match ",e," ball:"]}),(0,i.jsx)("div",{children:(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"number",min:"0",max:"100",step:"0.01",value:_["match_".concat(e)],onChange:function(n){var t=0;try{t=parseFloat(n.target.value)}catch(o){t=0}t<0&&(t=0),t>100&&(t=100),E((function(n){return(0,v.Z)((0,r.Z)({},n),(0,m.Z)({},"match_".concat(e),t))}))}}),(0,i.jsx)("strong",{children:"%"}),(0,i.jsxs)("a",{className:l().buttonWithIcon,onClick:function(){var n;n=e,E((function(e){return(0,v.Z)((0,r.Z)({},e),(0,m.Z)({},"match_".concat(n),e["match_".concat(n)]+f))}))},children:[(0,i.jsx)(w,{icon:"arrow-left"}),"Equalize the remainder"]})]})})]},e)})),(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Burn (From 2 to 30):"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"number",min:"2",max:"30",value:Y,onChange:function(e){q(e.target.value)}}),(0,i.jsx)("strong",{children:"%"})]}),(0,i.jsx)("div",{children:"How many percents of the band in a round will be burned"})]})]}),(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Sum:"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("b",{children:d}),(0,i.jsx)("strong",{children:"%"})]})]}),(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Undistributed:"}),(0,i.jsx)("div",{children:0!==f?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("b",{className:l().hasError,children:[f," %"]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("b",{children:f}),(0,i.jsx)("strong",{children:"%"})]})})]}),(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Ticket price:"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"number",step:"0.1",min:"0",value:F,onChange:function(e){!function(n){D(!1);try{(n=parseFloat(n))<0&&D(!0),n>50&&D(!0)}catch(e){D(!0)}I(n),B(s.ticketPrice!==n)}(e.target.value)}}),(0,i.jsx)("strong",{children:null===s||void 0===s||null===(e=s.tokenInfo)||void 0===e?void 0:e.symbol})]}),A&&(0,i.jsx)("div",{className:l().hasError,children:(0,i.jsx)("strong",{children:"Price must be between 0.00000000001 and 50"})})]})]}),(0,i.jsxs)("div",{className:l().actionsRow,children:[S&&(0,i.jsx)("strong",{className:l().hasError,children:"Save balls count first!"}),(0,i.jsx)("button",{disabled:G,onClick:$,children:G?"Saving...":"Save match rules, burn amount and ticket price"})]})]})]})}):(0,i.jsxs)("div",{className:l().errorBlock,children:[(0,i.jsx)("span",{children:"Section not accessible"}),(0,i.jsx)("span",{children:"Deploy and save the lottery contract first"})]})}}}var V=function(e){return new Promise(function(){var n=(0,o.Z)(s().mark((function n(t,o){var r,a,i,c,l,d,u,h,f,m;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.chainId,a=e.contractAddress,!(i=(0,A.T_)(r))){n.next=27;break}return n.prev=3,c=new(T())(i.rpcUrls[0]),l=new c.eth.Contract(R.Mt,a),n.next=8,l.methods.owner().call();case 8:return d=n.sent,n.next=11,l.methods.operatorAddress().call();case 11:return u=n.sent,n.next=14,l.methods.treasuryAddress().call();case 14:return h=n.sent,n.next=17,l.methods.viewCurrentLotteryId().call();case 17:return f=n.sent,n.next=20,l.methods.viewLottery(f).call();case 20:m=n.sent,t({chainId:r,contractAddress:a,owner:d,operator:u,treasury:h,currentLotteryInfo:m,currentLotteryNumber:f}),n.next=27;break;case 24:n.prev=24,n.t0=n.catch(3),o(n.t0);case 27:case"end":return n.stop()}}),n,null,[[3,24]])})));return function(e,t){return n.apply(this,arguments)}}())},M=function(e,n){var t=Number(n-e),o=Math.floor(t/3600),r=Math.floor(t%3600/60),a=Math.floor(t%3600%60);return(o>0?o+(1==o?" hour, ":" hours, "):"")+(r>0?r+(1==r?" minute, ":" minutes, "):"")+(a>0?a+(1==a?" second":" seconds"):"")},H=function(e){var n=e.ownerAddress,t=e.tokenAddress,o=e.chainId,r=e.approveFor;return new Promise((function(e,a){var s=(0,A.T_)(o);if(s)try{new(new(T())(s.rpcUrls[0]).eth.Contract)(F(),t).methods.allowance(n,r).call().then((function(n){e(n)})).catch((function(e){a(e)}))}catch(i){a(i)}else a("NOT_SUPPORTED_CHAIN")}))},U=t(10797),G=t(53419),J=function(e){return new Promise((function(n,t){var r=e.activeWeb3,a=(e.chainId,e.tokenAddress),i=e.approveFor,c=e.weiAmount,l=e.onTrx||function(){},d=e.onSuccess||function(){},u=e.onError||function(){},h=e.onFinally||function(){};r.eth.getAccounts().then(function(){var e=(0,o.Z)(s().mark((function e(o){var f,m,v,g;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o.length>0)){e.next=10;break}return m=o[0],v=new r.eth.Contract(F(),a),e.next=6,(0,G.A)(m,v,"approve",[i,c]);case 6:g=e.sent,(f=v.methods).approve.apply(f,(0,U.Z)([i,c])).send(g).on("transactionHash",(function(e){console.log("transaction hash:",e),l(e)})).on("error",(function(e){console.log("transaction error:",e),u(e),t(e)})).on("receipt",(function(e){console.log("transaction receipt:",e),d(e)})).then((function(e){n(e),h(e)})),e.next=11;break;case 10:t("NO_ACTIVE_ACCOUNT");case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.log(">>> approveToken",e),t(e)}))}))},K=t(35553),Y=t(72023),q=t.n(Y),z=function(){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=n.length,o=0;o<128;o++)e+=n.charAt(Math.floor(Math.random()*t));return e};function X(e){e.setDoReloadStorage,e.saveStorageConfig;var n=e.openConfirmWindow,t=e.addNotify,o=e.getActiveChain,r=e.storageData,a=(e.getStorageData,(0,g.useState)(!1)),s=a[0],c=a[1],d=(0,g.useState)(!1),u=d[0],h=d[1],f=(0,g.useState)(!1),m=f[0],v=f[1],x=(0,g.useState)(!1),p=x[0],b=x[1],y=(0,g.useState)(!1),k=y[0],S=y[1],C=(0,g.useState)(""),N=C[0],F=C[1],I=(0,g.useState)(0),T=I[0],A=I[1],D=(0,g.useState)(!1),R=D[0],B=D[1],_=(0,g.useState)(!1),E=_[0],W=_[1],O=(0,g.useState)(!1),P=O[0],U=O[1],G=(0,g.useState)(!1),Y=G[0],X=G[1];(0,g.useEffect)((function(){if(s&&u){var e=new Date("".concat(s," ").concat(u)).getTime()/1e3,n=M((0,j.K)(),e);v(n)}}),[s,u]);var $=function(){r.chainId&&r.lotteryAddress&&(t("Fetching lottery status"),V({chainId:r.chainId,contractAddress:r.lotteryAddress}).then((function(e){t("Lottery status fetched","success"),b(e),S(e.currentLotteryInfo)})))};(0,g.useEffect)((function(){X(!1);var e=new(Z())(k.amountCollectedInCake).div(new(Z())(10).pow(r.tokenInfo.decimals)).toNumber();A(e),B(new Date(1e3*parseInt(k.startTime,10)).toString()),W(new Date(1e3*parseInt(k.endTime,10)).toString()),U(M((0,j.K)(),parseInt(k.endTime,10)+60)),"1"===k.status&&parseInt(k.endTime,10)-(0,j.K)()<0?(F("lottery_round"),X(!0)):"1"!==p.currentLotteryNumber&&"1"===k.status?F("lottery_round"):"2"===k.status?F("lottery_draw"):"3"===k.status&&F("lottery_start")}),[k]),(0,g.useEffect)((function(){$()}),[r]);var Q=(0,g.useState)(!1),ee=Q[0],ne=Q[1],te=function(){var e;return void 0===(null===r||void 0===r||null===(e=r.tokenInfo)||void 0===e?void 0:e.decimals)?t("Fail. No information about token. Fetch them first and return","error"):(null===r||void 0===r?void 0:r.ticketPrice)?(null===r||void 0===r?void 0:r.burn)?s&&u?void n({title:"New round",message:"Start new lottery round?",onConfirm:function(){var e=new(Z())(r.ticketPrice).multipliedBy(Math.pow(10,r.tokenInfo.decimals)).toFixed(),n=parseInt(100*r.burn,10),a=[1,2,3,4,5,6].map((function(e){return e<=r.balls?parseInt(100*parseFloat(r.matchRules["match_".concat(e)]),10):0})),i=new Date("".concat(s," ").concat(u)).getTime()/1e3;t("Starting new lottery round..."),ne(!0);var c=o().activeWeb3;(0,L.Z)({activeWeb3:c,contractAddress:r.lotteryAddress,method:"startLottery",args:[i,e,2e3,a,n]}).then((function(e){ne(!1),$(),t("New lottery round started","success")})).catch((function(e){ne(!1),t("Fail start new lottery round. ".concat(e.message?e.message:""),"error")}))}}):t("Fail. Enter date of lottery round end","error"):t("Fail. Burn amount not setted","error"):t("Fail. Ticket price not setted.","error")},oe=(0,g.useState)(0),re=oe[0],ae=oe[1],se=(0,g.useState)(!1),ie=(se[0],se[1]),ce=function(){n({title:"Inject lotery bank amount",message:"Add ".concat(re," ").concat(null===r||void 0===r?void 0:r.tokenInfo.symbol," to the pot of the lottery round?"),onConfirm:function(){ie(!0);var e,n,a=(e=re,K.vz("".concat(e),n)),s=o();t("Inject bank. Check allovance"),H({ownerAddress:s.activeAccount,tokenAddress:null===r||void 0===r?void 0:r.tokenAddress,chainId:null===r||void 0===r?void 0:r.chainId,approveFor:null===r||void 0===r?void 0:r.lotteryAddress}).then((function(e){var n=function(){t("Injecting round bank. Confirm transaction"),(0,L.Z)({activeWeb3:s.activeWeb3,contractAddress:r.lotteryAddress,method:"injectFunds",args:[p.currentLotteryNumber,a]}).then((function(e){ie(!1),$(),t("The bank or round was replenished","success")})).catch((function(e){ie(!1),t("Fail inject funds. ".concat(e.message?e.message:""),"error")}))};new(Z())("".concat(a)).isGreaterThan(e)?(t("Inject bank. Need approve"),J({activeWeb3:s.activeWeb3,chainId:null===r||void 0===r?void 0:r.chainId,tokenAddress:null===r||void 0===r?void 0:r.tokenAddress,approveFor:null===r||void 0===r?void 0:r.lotteryAddress,weiAmount:a}).then((function(e){n()})).catch((function(e){ie(!1),t("Fail approve for inject round bank. ".concat(e.message?e.message:""),"error")}))):n()})).catch((function(e){ie(!1),t("Fail inject round bank. ".concat(e.message?e.message:""),"error")}))}})},le=(0,g.useState)(!1),de=le[0],ue=le[1],he=function(){var e=o();ue(!0),t("Closing lottery round. Confirm transaction"),(0,L.Z)({activeWeb3:e.activeWeb3,contractAddress:r.lotteryAddress,method:"closeLottery",args:[p.currentLotteryNumber]}).then((function(e){ue(!1),$(),t("Lottery round was closed","success")})).catch((function(e){ue(!1),t("Fail close lottery round. ".concat(e.message?e.message:""),"error")}))},fe=(0,g.useState)(z()),me=fe[0],ve=fe[1],ge=function(){ve(z())},xe=(0,g.useState)(!1),je=xe[0],pe=xe[1],be=function(){var e=z(),n=q()("".concat(e).concat(me));pe(!0),t("Drawing winning numbers. Confirm transaction");var a=o();(0,L.Z)({activeWeb3:a.activeWeb3,contractAddress:r.lotteryAddress,method:"drawFinalNumberAndMakeLotteryClaimable",args:[p.currentLotteryNumber,"0x".concat(n),!0]}).then((function(e){pe(!1),$(),t("Winning numbers drawed!","success")})).catch((function(e){pe(!1),t("Fail draw winning numbers. ".concat(e.message?e.message:""),"error")}))};return{render:function(){var e,n;return r.lotteryAddress?(0,i.jsxs)("div",{className:l().adminForm,children:["lottery_start"===N&&(0,i.jsxs)("div",{className:l().subFormInfo,children:[(0,i.jsx)("h3",{children:"Start new lottery round"}),(0,i.jsxs)("div",{className:l().subForm,children:[(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Round end in:"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"date",value:s,onChange:function(e){c(e.target.value)}}),(0,i.jsx)("input",{type:"time",value:u,onChange:function(e){h(e.target.value)}}),(0,i.jsx)("strong",{children:"(min 5 minutes, max 31 days)"})]}),m&&(0,i.jsx)("div",{children:(0,i.jsxs)("strong",{children:["Round length is ",m]})})]})]}),(0,i.jsx)("div",{className:l().actionsRow,children:(0,i.jsx)("button",{disabled:ee,onClick:te,children:ee?"Starting new lottery round...":"Start new round"})})]})]}),"lottery_round"===N&&(0,i.jsxs)("div",{className:l().subFormInfo,children:[(0,i.jsx)("h3",{children:"Lottery round is running now"}),(0,i.jsxs)("div",{className:l().subForm,children:[(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Round started:"}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{children:(0,i.jsx)("strong",{children:R})})})]}),(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Round ends:"}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{children:(0,i.jsx)("strong",{children:E})})})]}),(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Time left:"}),(0,i.jsx)("div",{children:Y?(0,i.jsx)("div",{children:(0,i.jsx)("a",{className:l().buttonWithIcon,onClick:he,children:de?"Closing...":"Time is over. Click to close the round and proceed to calculating the winning combination"})}):(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:P}),(0,i.jsxs)("a",{className:l().buttonWithIcon,onClick:$,children:[(0,i.jsx)(w,{icon:"refresh"}),"Fetch status"]})]})})]}),(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Round bank:"}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{children:(0,i.jsxs)("strong",{children:[T," ",null===r||void 0===r||null===(e=r.tokenInfo)||void 0===e?void 0:e.symbol]})})})]}),(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Inject funds:"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"number",min:"0",step:"0.01",value:re,onChange:function(e){ae(e.target.value)}}),(0,i.jsx)("strong",{children:null===r||void 0===r||null===(n=r.tokenInfo)||void 0===n?void 0:n.symbol}),(0,i.jsxs)("a",{className:l().buttonWithIcon,onClick:ce,children:[(0,i.jsx)(w,{icon:"add"}),"Approve and add to round bank"]})]}),(0,i.jsx)("div",{children:(0,i.jsx)("strong",{children:"You can add some amount of tokens to bank of current lottery round"})})]})]})]})]}),"lottery_draw"===N&&(0,i.jsxs)("div",{className:l().subFormInfo,children:[(0,i.jsx)("h3",{children:"The lottery round is over. You need to calculate the winning combination"}),(0,i.jsxs)("div",{className:l().infoRow,children:[(0,i.jsx)("label",{children:"Uniq salt:"}),(0,i.jsx)("div",{children:(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"text",value:me,readOnly:!0}),(0,i.jsx)("a",{className:l().buttonWithIcon,onClick:ge,children:"Generate rand"})]})})]}),(0,i.jsx)("div",{className:l().actionsRow,children:(0,i.jsx)("button",{disabled:je,onClick:be,children:"Calculate winning numbers"})})]})]}):(0,i.jsxs)("div",{className:l().errorBlock,children:[(0,i.jsx)("span",{children:"Section not accessible"}),(0,i.jsx)("span",{children:"Deploy and save the lottery contract first"})]})}}}var $=t(37826);function Q(e){e.setDoReloadStorage;var n=e.saveStorageConfig,t=e.openConfirmWindow,o=e.addNotify,a=(e.getActiveChain,e.storageData),s=(0,g.useState)(a.texts),c=s[0],d=s[1],u=(0,g.useState)(!1),h=u[0],f=u[1],x=function(){t({title:"Save texts",message:"Save changes to storage config?",onConfirm:function(){f(!0),n({onBegin:function(){o("Confirm transaction for save changed texts")},onReady:function(){o("Texts successfull saved","success"),f(!1)},onError:function(e){o("Fail save texts","error"),f(!1)},newData:{texts:c}})}})},j=function(e,n){d((function(t){return(0,v.Z)((0,r.Z)({},t),(0,m.Z)({},"".concat(e),n))}))},p=function(e){var n=e.code,t=e.desc,o=(e.value,e.defValue),r=e.multiline,a=e.multilineView,s=e.markdown;return(0,i.jsxs)("div",{className:l().adminStorageTextArea,children:[(0,i.jsxs)("label",{children:[t," (",n,") ",s&&(0,i.jsx)("b",{children:"(MarkDown)"})," ",r&&(0,i.jsx)("b",{children:"(Multiline)"})]}),r||a?(0,i.jsx)("textarea",{value:void 0!==c[n]?c[n]:o,onChange:function(e){j(n,e.target.value)}}):(0,i.jsx)("input",{type:"text",value:void 0!==c[n]?c[n]:o,onChange:function(e){j(n,e.target.value)}})]})},b=(0,g.useState)({}),w=b[0],k=b[1];return{render:function(){return(0,i.jsxs)("div",{className:l().adminForm,children:[Object.keys($.D).map((function(e){return y({title:$.D[e].title,isOpened:w[e],onToggle:function(){!function(e){k((function(n){return(0,v.Z)((0,r.Z)({},n),(0,m.Z)({},"".concat(e),void 0===w[e]||!w[e]))}))}(e)},key:e,content:(0,i.jsx)("div",{className:l().adminFormTextGroup,children:$.D[e].items.map((function(e,n){var t=e.code,o=e.desc,r=e.value,a=e.multiline,s=e.markdown,c=e.multilineView;return(0,i.jsx)("div",{children:p({code:t,desc:o,defValue:r,multiline:a,multilineView:c,markdown:s})},n)}))})})})),(0,i.jsx)("div",{className:l().actionsRowMain,children:(0,i.jsx)("button",{disabled:h,onClick:x,children:h?"Saving...":"Save changes"})})]})}}}var ee=t(78967),ne=t(34617),te=t(94360),oe=t(84575),re=function(e){return new Promise((function(n){window.setTimeout((function(){n()}),e)}))},ae={main:"Main settings",gamerules:"Rules",rounds:"Rounds",texts:"Edit texts",design:"Design"},se=(function(){var e=Object.keys(A.w5).map((function(e){return{id:A.w5[e].networkVersion,title:A.w5[e].chainName}}));e.unshift({id:0,title:"Select Blockchain"})}(),function(e){var n=(0,ne.n)(),t=n.storageChainId,a=n.storageAddress,c=e.storageData,d=(e.storageIsLoading,e.isOwner),u=e.openConfirmWindow,h=e.addNotify,m=e.setDoReloadStorage,v=e.setDoReloadStorageFast,x=e.storageTexts,j=e.storageDesign,p=(0,g.useState)(!1),b=p[0],w=p[1],y=(0,g.useState)(!1),k=y[0],S=y[1],N=(0,g.useState)(!1),F=N[0],I=N[1],T=(0,g.useState)(!1),D=T[0],R=T[1],B=function(e,n){var t=!1;try{t=e.message.replace("Internal JSON-RPC error.",""),t=JSON.parse(t)}catch(o){}switch(t&&t.message?t.message:e.message){case"execution reverted: You don't own this token!":console.log("You dont own this token");break;case"MetaMask Tx Signature: User denied transaction signature.":console.log("Transaction denied");break;case"execution reverted: ERC721: invalid token ID":console.log("Invalid token ID");break;default:console.log("Unkrnown error",e.message)}},Z=function(e){w(e)},_=function(){var e=(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k||"".concat(b)!="".concat(t)){e.next=4;break}k.eth.getAccounts().then((function(e){I(e[0]);var n=new k.eth.Contract(te.Mt,a);V(n)})).catch((function(e){console.log(">>> initOnWeb3Ready",e),B(e)})),e.next=8;break;case 4:return e.next=6,(0,ee.IC)();case 6:e.sent&&E();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,g.useEffect)((function(){var e;e="on useEffect activeWeb3 initOnWeb3Ready",console.log(e),_()}),[k]);var E=function(){var e=(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,ee.pE)({onBeforeConnect:function(){R(!0)},onSetActiveChain:w,onConnected:function(e,n){S(n),(0,ee.uK)(Z),R(!1)},onError:function(e){console.log(">>>> connectWithMetamask",e),B(e),R(!1)},needChainId:t});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=(0,g.useState)(!1),L=W[0],V=W[1],M=(0,g.useState)(!1),H=M[0],U=M[1],J=function(){var e=(0,o.Z)(s().mark((function e(n){var a,i,l,d,f,m,g;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.onBegin,i=n.onReady,l=n.onError,d=n.newData,!H){e.next=4;break}return h("Storage already saving...","error"),e.abrupt("return");case 4:f=(0,r.Z)({},c,d),console.log(">> save data",f),m=function(){var e=(0,o.Z)(s().mark((function e(){var n,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F||!L){e.next=19;break}return h("Saving config to storage. Confirm transaction"),U(!0),a&&a(),n=f,e.prev=5,e.next=8,(0,G.A)(F,L,"setKeyData",[(0,oe.Z)(),{owner:F,info:JSON.stringify(n)}]);case 8:t=e.sent,L.methods.setKeyData((0,oe.Z)(),{owner:F,info:JSON.stringify(n)}).send(t).then((function(){U(!1),v(!0),i&&i()})).catch((function(e){console.log(">>> error",e),U(!1),l&&l(e)})),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(">>> error",e.t0),U(!1),l&&l(e.t0);case 17:e.next=20;break;case 19:h("Fail save storage. No active wallet or contract not ready yet","error");case 20:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(){return e.apply(this,arguments)}}(),console.log(">> do save",(0,ee.BV)()!==t,(0,ee.BV)(),t),(0,ee.BV)(t)?m():(g=(0,A.T_)(t),u({title:"Need change active chain for save main config",message:"Please change network Storage chain (".concat(g.chainName,")"),onConfirm:(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h("Switching to Storage chain"),e.next=3,(0,ee.M5)(t);case 3:return e.next=5,re(2e3);case 5:m();case 6:case"end":return e.stop()}}),e)}))),okLabel:"Switch"}));case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),K=c&&!c.isInstalled,Y=(0,g.useState)(!K),q=Y[0],z=Y[1],$=(0,g.useState)(!1),se=$[0],ie=$[1],ce=(0,g.useState)("main"),le=ce[0],de=ce[1],ue=(0,g.useState)((null===c||void 0===c?void 0:c.chainId)||0),he=(ue[0],ue[1]);(0,g.useEffect)((function(){c&&he(c.chainId)}),[c]);var fe=function(){var e=(0,A.T_)(b),n=(0,A.T_)(t);return(0,i.jsxs)("div",{className:l().adminActiveChainInfo,children:[(0,i.jsxs)("span",{children:["Current active network is ",(0,i.jsxs)("b",{children:[(null===e||void 0===e?void 0:e.chainName)||"Unknown"," (",b,")"]})]}),(0,i.jsxs)("span",{children:["Main config storage network is ",(0,i.jsxs)("b",{children:[(null===n||void 0===n?void 0:n.chainName)||"Unknown"," (",t,")"]})]})]})},me={setDoReloadStorage:m,setDoReloadStorageFast:v,saveStorageConfig:J,openConfirmWindow:u,addNotify:h,getActiveChain:function(){return{activeAccount:F,activeChainId:b,activeWeb3:k}},storageChainId:t,storageData:c,getStorageData:function(){return c},storageDesign:j,storageTexts:x},ve=new O(me),ge=new P(me),xe=new X(me),je=new Q(me),pe=new C(me);return q&&(K=!1),(0,i.jsxs)("div",{className:l().container,children:[f("settings",!0),(0,i.jsx)("h1",{className:l().h1,children:"Settings"}),null!==c&&(0,i.jsx)(i.Fragment,{children:K?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{children:"Application need setup on this domain"}),F?(0,i.jsxs)(i.Fragment,{children:[fe(),(0,i.jsx)("button",{disabled:se,className:"".concat(l().mainButton," ").concat(l().autoWidth," primaryButton"),onClick:function(){J({onBegin:function(){ie(!0),h("Confirm transaction for setup Lottery on this domain")},onReady:(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ie(!1),z(!0),h("Lottery successfull installed on this domain. Now you can configure farm","success"),m(!0);case 4:case"end":return e.stop()}}),e)}))),onError:function(e){ie(!1),h("Fail setup Lottery on domain","error")},newData:{isInstalled:!0}})},children:se?"Setup on domain...":"Setup Lottery on this domain"})]}):(0,i.jsx)("button",{disabled:D,className:"".concat(l().mainButton," primaryButton"),onClick:E,children:D?"Connecting":"Connect Wallet"})]}):(0,i.jsx)(i.Fragment,{children:F?(0,i.jsx)(i.Fragment,{children:d?(0,i.jsxs)(i.Fragment,{children:[fe(),(0,i.jsx)("ul",{className:l().settingsTabsNav,children:Object.keys(ae).map((function(e){return(0,i.jsx)("li",{onClick:function(){de(e)},className:e===le?l().activeTab:"",children:ae[e]},e)}))}),(0,i.jsx)("hr",{className:"".concat(l().divider," ").concat(l().spacerTop)}),"main"===le&&ve.render(),"gamerules"===le&&ge.render(),"rounds"===le&&xe.render(),"texts"===le&&je.render(),"design"===le&&pe.render()]}):(0,i.jsx)("h2",{children:"Access denied"})}):(0,i.jsx)("button",{disabled:D,className:"".concat(l().mainButton," primaryButton"),onClick:E,children:D?"Connecting":"Connect Wallet"})})})]})})}},function(e){e.O(0,[976,761,774,888,179],(function(){return n=52837,e(e.s=n);var n}));var n=e.O();_N_E=n}]);